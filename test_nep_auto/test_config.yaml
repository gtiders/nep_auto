# NEP 主动学习测试配置

global:
  work_dir: "./work"
  max_iterations: 3  # 测试只运行3轮
  max_structures_per_iteration: 10  # 每轮最多10个结构
  log_file: "active_learning.log"
  initial_nep_model: "../input/nep.txt"
  initial_train_data: "../input/train.xyz"
  submit_command: "touch DONE"  # 测试用，直接标记完成
  check_interval: 1  # 1秒检查间隔

vasp:
  incar_file: "../input/INCAR"
  potcar_file: "../input/POTCAR"
  kpoints_file: "../input/KPOINTS"
  job_script: |
    #!/bin/bash
    # 测试脚本，不实际运行VASP
    echo "Mock VASP calculation"
    touch DONE
  timeout: 300

nep:
  input_content: |
    nep4 3 K Li Ge
    cutoff 8 4 79 13
    n_max 4 4
    basis_size 8 8
    l_max 4 2 0
    ANN 30 0
    generation 100
    population 50
  job_script: |
    #!/bin/bash
    # 测试脚本，不实际训练NEP
    echo "Mock NEP training"
    cp ../nep.txt .
    touch DONE
  timeout: 300

gpumd:
  conditions:
    - id: "test_300K"
      structure_file: "../input/model.xyz"
      run_in_content: |
        potential nep.txt
        velocity 300
        ensemble nvt_ber 300 300 100
        time_step 1
        compute_extrapolation active_set.asi 10 100 1.0 10.0
        dump_position 100
        run 1000

  job_script: |
    #!/bin/bash
    # 测试脚本，不实际运行GPUMD
    echo "Mock GPUMD simulation"
    touch extrapolation_dump.xyz
    touch DONE
  timeout: 300

selection:
  gamma_tol: 1.01
  batch_size: 5000
